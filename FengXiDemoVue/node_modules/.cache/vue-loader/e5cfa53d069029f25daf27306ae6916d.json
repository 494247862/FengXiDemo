{"remainingRequest":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\svn\\FengXiDemo\\FengXiDemoVue\\src\\views\\DepartmentManage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\src\\views\\DepartmentManage\\index.vue","mtime":1696835888540},{"path":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\svn\\FengXiDemo\\FengXiDemoVue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZGQgZnJvbSAnQC92aWV3cy9EZXBhcnRtZW50TWFuYWdlL0FkZCcKaW1wb3J0IHtnZXREZXBhcnRtZW50VHJlZSwgZGVsZXRlRGVwYXJ0bWVudH0gZnJvbSAnQC9hcGkvZGVwYXJ0bWVudCcKaW1wb3J0IFVwZGF0ZSBmcm9tICdAL3ZpZXdzL0RlcGFydG1lbnRNYW5hZ2UvVXBkYXRlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEZXBhcnRtZW50TWFuYWdlJywKICBjb21wb25lbnRzOiB7VXBkYXRlLCBBZGR9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1Nob3dBZGQ6IGZhbHNlLAogICAgICBpc1Nob3dVcGRhdGU6IGZhbHNlLAogICAgICBjbGlja1JvdzogbnVsbCwKICAgICAgVGFibGVEYXRhOiBbXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuUXVlcnlUYWJsZURhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgUXVlcnlUYWJsZURhdGEoKSB7CiAgICAgIGdldERlcGFydG1lbnRUcmVlKCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuVGFibGVEYXRhID0gcmVzCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAn6ZSZ6K+vJywKICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBkZWxldGVEZXBhcnRtZW50KHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbliKDpmaTor6Xpg6jpl6jvvJ/pg6jpl6jlkI3vvJonICsgcm93LmRlcGFydG1lbnROYW1lLCAn5Yig6Zmk6YOo6ZeoJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICBkZWxldGVEZXBhcnRtZW50KHJvdy5pZCkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8nCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5RdWVyeVRhYmxlRGF0YSgpCiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKCiAgICAgIH0pCgogICAgfSwKICAgIG9wZW5BZGQocm93KSB7CiAgICAgIHRoaXMuaXNTaG93QWRkID0gdHJ1ZQogICAgICB0aGlzLmNsaWNrUm93ID0gcm93CiAgICB9LAogICAgb3BlblVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy5jbGlja1JvdyA9IHJvdwogICAgICB0aGlzLmlzU2hvd1VwZGF0ZSA9IHRydWUKICAgIH0sCiAgICBjbG9zZUFkZCgpIHsKICAgICAgdGhpcy5pc1Nob3dBZGQgPSBmYWxzZQogICAgICB0aGlzLlF1ZXJ5VGFibGVEYXRhKCkKICAgIH0sCiAgICAvLyDlhbPpl63nvJbovpHnqpflj6MKICAgIGNsb3NlVXBkYXRlKCkgewogICAgICB0aGlzLmlzU2hvd1VwZGF0ZSA9IGZhbHNlCiAgICAgIHRoaXMuUXVlcnlUYWJsZURhdGEoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/DepartmentManage","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row style=\"height: calc(100%)\">\n      <el-card style=\"height: 100%\" body-style=\"height: 100%\">\n        <!--        头部-->\n        <div slot=\"header\" style=\"width: 100%;\n        display: flex;align-items: center;\n          justify-content: space-between;\">\n          <div>\n            <i class=\"el-icon-s-grid\"></i>\n            <span style=\"margin-left: 5px;\">部门数据</span>\n          </div>\n          <div>\n            <el-button size=\"small\" type=\"primary\" @click=\"openAdd(null)\">新增</el-button>\n          </div>\n        </div>\n        <!--        数据显示-->\n        <el-table\n          row-key=\"id\"\n          lazy\n          :tree-props=\"{children:'children',hasChildren:true}\"\n          :data=\"TableData\"\n          :header-cell-style=\"{'text-align': 'center'}\"\n          :cell-style=\"{'text-align': 'center'}\"\n          border\n          style=\"width: 100%;height: calc(100% - 60px);overflow-y: auto\">\n          <el-table-column\n            prop=\"departmentCode\"\n            align=\"center\"\n            label=\"部门编号\">\n          </el-table-column>\n\n          <el-table-column\n            prop=\"departmentName\"\n            align=\"center\"\n            label=\"部门名称\">\n          </el-table-column>\n\n          <el-table-column\n            fixed=\"right\"\n            label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button\n                @click=\"openAdd(scope.row)\"\n                type=\"text\"\n                size=\"mini\">新增子部门\n              </el-button>\n              <el-button\n                @click=\"openUpdate(scope.row)\"\n                type=\"text\"\n                size=\"mini\">编辑\n              </el-button>\n              <el-button\n                style=\"color: red\"\n                type=\"text\"\n                @click=\"deleteDepartment(scope.row)\"\n                size=\"mini\">删除\n              </el-button>\n            </template>\n          </el-table-column>\n\n        </el-table>\n      </el-card>\n    </el-row>\n    <el-dialog title=\"新增部门\"\n               width=\"25%\"\n               v-if=\"isShowAdd\"\n               :close-on-click-modal=\"false\"\n               :visible.sync=\"isShowAdd\">\n      <Add :row=\"this.clickRow\" :close-fun=\"closeAdd\"/>\n    </el-dialog>\n\n    <el-dialog title=\"编辑部门\"\n               v-if=\"isShowUpdate\"\n               :close-on-click-modal=\"false\"\n               :visible.sync=\"isShowUpdate\"\n               width=\"25%\">\n      <Update :row=\"this.clickRow\" :close-fun=\"this.closeUpdate\"/>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Add from '@/views/DepartmentManage/Add'\n  import {getDepartmentTree, deleteDepartment} from '@/api/department'\n  import Update from '@/views/DepartmentManage/Update'\n\n  export default {\n    name: 'DepartmentManage',\n    components: {Update, Add},\n    data() {\n      return {\n        isShowAdd: false,\n        isShowUpdate: false,\n        clickRow: null,\n        TableData: []\n      }\n    },\n    mounted() {\n      this.QueryTableData()\n    },\n    methods: {\n      QueryTableData() {\n        getDepartmentTree().then(res => {\n          this.TableData = res\n        }).catch(err => {\n          this.$notify.error({\n            title: '错误',\n            message: err.message\n          })\n        })\n      },\n      deleteDepartment(row) {\n        this.$confirm('是否删除该部门？部门名：' + row.departmentName, '删除部门', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消'\n        }).then(async () => {\n          deleteDepartment(row.id).then(res => {\n            this.$notify.success({\n              title: '成功',\n              message: '删除成功'\n            })\n            this.QueryTableData()\n          }).catch(err => {\n            this.$notify.error({\n              title: '失败',\n              message: err.message\n            })\n          })\n        }).catch(err => {\n\n        })\n\n      },\n      openAdd(row) {\n        this.isShowAdd = true\n        this.clickRow = row\n      },\n      openUpdate(row) {\n        this.clickRow = row\n        this.isShowUpdate = true\n      },\n      closeAdd() {\n        this.isShowAdd = false\n        this.QueryTableData()\n      },\n      // 关闭编辑窗口\n      closeUpdate() {\n        this.isShowUpdate = false\n        this.QueryTableData()\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /*强修改表格展开按钮位置*/\n  >>> .el-table__expand-icon {\n    position: absolute;\n    left: 10px\n  }\n</style>\n"]}]}